<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 
  namespace => 인터페이스의 패키지 및 이름과 일치해야 한다.
 -->
<mapper namespace="com.items.board.dao.BoardDao">

  <!-- 테이블의 컬럼과 객체 필드를 연결한다. -->
  <resultMap type="board" id="boardMap">
  
    <id column="no" property="no"/>
    <result column="title" property="title"/>
    <result column="content" property="content"/>
    <result column="created_date" property="createdDate"/>
    <result column="viewcount" property="viewCount"/>
    
    <association property="writer" javaType="member">
      <id column="no" property="no"/>
      <result column="name" property="name"/>
      <result column="email" property="email"/>
    </association>
    
  </resultMap>

  <!-- 
    id => 인터페이스의 메서드 이름과 일치해야 한다.
  -->
  <select id="findAll" resultMap="boardMap">
	SELECT  
	  b.no,
	  b.title,
	  b.create_date,
	  b.viewCount,
	  m.no,
	  m.name,
	  m.email
	FROM
	  board b JOIN member m ON b.writer = m.email
	ORDER BY  
	  b.no DESC;
  </select>
 
 </mapper>